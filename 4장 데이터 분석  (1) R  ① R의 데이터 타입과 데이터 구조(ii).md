## 4장 데이터 분석  (1) R  ① R의 데이터 타입과 데이터 구조(ii)



#### 5) 기본 연산

​     

**① 조회**

기본적으로 [  ]를 사용하면 ‘선택’의 의미입니다.

[  ] 안에 인덱스나 레코드명, 컬럼명을 넣으면 해당하는 데이터가 출력됩니다.

```R
a[c(2, 4)], b[-c(3, 5)], c[-c(4:7, 15)]
# -의 의미는 해당 인덱스는 제외하고 출력해달라는 의미입니다

b[c(2:3), ]  # b의 2, 3행에 있는 모든 데이터를 출력해주세요
```



참고로 $를 사용하면 벡터를 반환하지만 [ ]는 데이터 프레임을 반환합니다



**② 벡터의 연산**

하나의 벡터에 있는 모든 원소에 동일한 연산을 하고 싶다면 벡터 변수에 기호와 숫자를 넣으면 됩니다.

```R
n + 2
n - 2
n * 2
n / 2 
```

​     

벡터끼리 사칙연산을 하는 경우 벡터에 포함된 원소의 개수가 중요합니다.

원소개수가 동일하면 사칙연산이 되며, 원소 개수가 다르면 원소가 적은 쪽의 벡터를 반복해서 연산합니다.

```R
a = c(9, 3, 6)
b = c(1, 2, 3, 4, 5)

a + b
a - b
a * b
a / b
```

​     

벡터에 문자(열)이 있는 문자형 벡터는 사칙연산이 불가능하고, 논리형이 있는 논리형 벡터는 사칙연산이 가능합니다. TRUE(T)는 1로, FALSE(F)는 0으로 변환됩니다.

참고로 문자형 > 숫자형 > 논리형이므로 문자열이 있는 벡터가 하나라도 있으면 사칙연산이 불가능합니다.

​     

```R
append(벡터, 추가할 데이터, after=숫자)

# 벡터에 데이터를 추가하는 함수 = 인덱스 다음에 데이터를 추가함
```

​     

**③ 행렬의 연산**

행렬(matrix) 간 사칙연산을 위해서는 행과 열의 개수가 일치해야 합니다.

​     

```R
행렬명*행렬명       # 각 행렬의 행,열이 일치하는 데이터끼리 곱함(1행1열*1행1열, 1행2열*1행2열 etc)

행렬명 %*% 행렬명   # 앞 행렬의 행과 뒤 행렬의 열끼리 곱함(1행*1열, 1행*2열, 2행*1열 etc)

t(행렬명)          # 전치행렬(행과 열의 데이터를 바꾼 행렬)

solve(행렬명)      # 역행렬(원래 행렬과 역행렬을 곱하면 단위행렬이 되어야 함)
```

​     

```R
rbind(행렬A, 행렬B)  # 행 방향으로 2개의 행렬을 붙임(단, 열의 개수가 일치해야 함)

cbind(행렬A, 행렬B)  # 열 방향으로 2개의 행렬을 붙임(단, 행의 개수가 일치해야 함)
```

​     

```R
rownames(행렬명)  # 행렬의 행이름만 출력

colnames(행렬명)  # 행렬의 열이름만 출력

rownames(aa) <- c(“2013년”, “2014년”, “2015년”, “2016년”)   # aa행렬의 행 이름을 변경하겠다
```

 

**④ 배열의 연산**

```R
dimnames(배열명)  # 배열의 행, 열, 층 이름을 출력하는 함수

dimnames(배열명) <- list(row, col, layer)  # 각 위치에 넣은 이름이 배열의 행/열/층 이름이 됨
```

​     

```R
배열명[행, 열, 층]   # 배열은 3차원이므로 하나만 지정해서 조회 가능

in[ , , 2][4]      # 2번째 층(행렬)의 열 방향으로 4번째인 데이터 조회 

in[ , , 3][ , 2]   # 3번째 층의 2열의 모든 데이터 조회
```

​     

**⑤ 데이터프레임의 연산**

```R
데이터프레임명$변수명     # 데이터프레임의 특정 변수열만 출력

데이터프레임명[“변수명”]  # 데이터프레임명[c(“변수”, “변수”, “변수”)] 

데이터프레임명[인덱스]
```



```R
names(데이터프레임명)  # 데이터프레임의 변수(열)명 출력

str(데이터프레임)     # 데이터프레임의 구조 출력(관찰치 개수, 변수 개수, 각 변수의 데이터 유형)

merge(데이터프레임A, 데이터프레임B, by=“공통 컬럼”)  # SQL의 조인처럼 데이터프레임을 병합하는 함수
```

​         

**⑥ 리스트의 연산**

​     

1) 스칼라, 벡터

```R
리스트명$요소명    # 리스트의 해당 요소에 있는 데이터만 출력됨

리스트명$[“요소명”][[인덱스]]  # 리스트의 해당 요소, 인덱스에 해당하는 데이터만 출력

                           # 복수 개의 데이터를 출력하려면 [[c(인덱스, 인덱스)]]로 입력함

리스트명$[인덱스]   # 리스트 해당 요소의 요소명과 데이터가 출력 = 리스트명$[“요소명”]
```

​     

2) 행렬, 배열, 데이터프레임, 리스트

```R
리스트명[[“요소명”]][“행이름”, ]  # 리스트의 해당 요소, 해당 행에 있는 모든 데이터 출력

리스트명[[“요소명”]][인덱스, ]    # 리스트의 해당 요소, 인덱스에 있는 모든 데이터 출력

리스트명[[“요소명”]][ , , 차원 인덱스][행 인덱스, 열 인덱스]

                               # 리스트에 있는 배열 데이터 중 해당 행, 열의 데이터 출력

리스트명[[“요소명”]][“변수명”]    # 리스트에 포함된 데이터프레임의 열에 있는 데이터 출력

리스트명[[“요소명”]][c(“변수명”, “변수명”)]   # 리스트에 포함된 리스트의 데이터 출력
```

​     

**⑦ 데이터 유형 간 변환**

```R
as.character(데이터)  <->  as.factor(데이터)

as.integer(데이터)

as.numeric(데이터)

as.logical(데이터)
```

​     

**⑧ 객체 유형 간 변환**

```R
as.vector( )  <->  데이터프레임[  ,  ]을 통해 변환할 수 있음

as.factor( )

as.matrix( )      #  rbind( ), cbind( )로 묶을 수도 있음

as.array( )

as.data.frame( )  # rbind( ), cbind( )로 묶을 수도 있음

as.list( )  <->  unlist(리스트)
```

​     



#### 참고문헌

c강사님의 강의노트



-- 2018.10.02