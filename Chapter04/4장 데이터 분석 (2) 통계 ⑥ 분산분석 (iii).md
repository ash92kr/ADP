## 4장 데이터 분석 (2) 통계 ⑥ 분산분석 (iii)

​ 

​ 

#### 4) 일원분산분석(계속)

​ 

​ 

**④ F-검정(분산분석)**

​ 

가) 분산분석표를 통한 관찰 F통계량 구하기

| 변량              |    제곱합    | 자유도 | 평균제곱 |    F    | 유의확률 |
| :---------------- | :----------: | :----: | :------: | :-----: | :------: |
| **집단 간(처리)** |     SSB      |  k-1   |   MSB    | MSB/MSW | p-value  |
| **집단 내(오차)** |   SSW(SSE)   |  N-k   | MSW(MSE) |         |          |
| **합계**          | SST(SSB+SSW) |  N-1   |          |         |          |

​     

다소 어려운 알파벳이 있지만, 하나씩 해석해보기로 합시다.

우리가 구해야 할 관찰 F통계량은 오른쪽에서 2번째에 있는 F값입니다.

(참고 :   ![default](https://user-images.githubusercontent.com/43332543/47266395-b4224b80-d570-11e8-8598-6eef6b8a24de.jpg) = 집단(group)의 평균,   ![default](https://user-images.githubusercontent.com/43332543/47266394-b389b500-d570-11e8-8382-942c9fdc1e28.jpg) = 전체 평균)

​     

- SSB(집단 간 편차 제곱의 합) :  ![ssb](https://user-images.githubusercontent.com/43332543/47266404-c9977580-d570-11e8-9e0b-35209b66ac07.jpg)  

편차는 평균 - 개별 데이터입니다. 그런데 한 집단의 편차(평균-개별 데이터)를 모두 더한 값은 언제나 0입니다. 데이터는 평균을 중심으로 좌측과 우측으로 고르게 흩어졌기 때문입니다. 그래서 편차는 일반적으로 제곱해서 사용하며, 기술통계에서 사용한 분산이나 표준편차도 편차를 제곱해 유도한 값입니다.

위 수식을 해석하면 각 집단의 평균을 구한 다음, 전체 평균을 뺀 값(편차)을 제곱했습니다. 그 다음 각 집단에 속한 데이터의 개수를 곱한 뒤, 집단별로 나온 수치를 모두 더했습니다.

각 집단의 데이터 개수를 곱한 것은 가중치의 역할을 합니다. 데이터 개수가 많을수록 해당 평균을 더 중요하게 여긴다는 의미입니다.

SSB의 의미는 각 집단이 전체 평균에서 얼마나 떨어져 있는지 나타내는 값입니다. 이 값이 클수록 집단별로 명확하게 구분된 평균을 가졌다는 의미입니다.(http://socialinnovation.tistory.com/142 사이트의 경영학과에 해당합니다)

​     

- SSW(집단 내 편차 제곱합) :  ![sst](https://user-images.githubusercontent.com/43332543/47266405-ca300c00-d570-11e8-8bfe-01db479e66fb.jpg)  

이번에는 하나의 집단에서 시작하겠습니다. 각 집단에 속하는 데이터에서 그 집단의 평균을 뺀 값(편차)을 제곱해 데이터의 개수만큼 반복해 모두 더합니다.(제곱합) 각 집단별로 이를 반복해서 모든 집단의 집단 내 편차 제곱합을 구합니다.

SSW의 의미는 하나의 집단에 속한 데이터들이 집단의 평균으로부터 얼마나 떨어졌는지 보여주는 값입니다. 이 값이 클수록 데이터가 넓게 분포되므로 집단 간 차이가 불명확합니다.(http://socialinnovation.tistory.com/142 사이트의 경제학과에 해당합니다)

​     

- SST(전체 편차 제곱합)

SST도 별도의 공식이 있지만, 간편하게 SSB + SSW로 구할 수 있습니다. SST는 각 데이터를 전체 평균에서 뺀 값(편차)을 제곱해 모두 더한 값입니다. SST를 전체 데이터의 개수로 나누면 분산이 됩니다.

때문에 SST는 값 자체가 중요하기보다 SSB나 SSW 중 하나를 구할 수 없을 때 SST와 나머지 하나의 값을 이용해 SSB와 SSW를 추론하는 역할로 더 많이 사용합니다.

​     

- 자유도

자유도는 특정 조건에서 자유롭게 바꿀 수 있는 변수(값)의 개수입니다. 일반적으로 n개의 값을 자유롭게 설정할 수 있지만, 평균(합계)이 정해져 있는 방식으로 이해합니다. 그러면 n-1개는 자유롭게 값을 입력할 수 있지만, 나머지 1개는 고정된 평균(합계)로 인해 값이 고정됩니다.

집단 간 자유도는 전체 평균으로 인해 집단의 개수 k에서 1개를 제외합니다. 각 집단의 평균을 모아 전체 평균을 구할 수 있기 때문입니다.

집단 내 자유도는 각 집단의 평균으로 인해 전체 데이터에서 집단의 개수를 제외합니다. 각 집단의 평균은 그 집단에 속한 데이터들로 만들 수 있기 때문입니다.

​     

- 평균 제곱

평균 제곱은 행별로 구한 제곱합을 같은 행의 자유도로 나눈 값입니다. 즉, 평균과 같은 방식으로 SSB/k-1, SSW/N-k를 통해 구합니다. 

평균 제곱도 고유한 의미보다 F값을 위한 중간 단계로 이해하시면 됩니다.

​     

- F값(관찰 F 통계량)

분산분석에서 가장 중요한 것은 F값과 여기서 도출한 유의확률입니다. F값은 MSB/MSW를 통해 구할 수 있습니다. 

즉, 집단 간 편차의 평균을 집단 내 편차의 평균으로 나누었기 때문에 F값이 클수록 집단별로 구분된 데이터들을 가졌다고 이해하면 됩니다. 아울러 F값이 커질수록 유의확률도 더 낮아집니다.

​     

나) 기준 F값(통계량)을 구해 가설 검정

관찰 F통계량만으로는 할 수 있는 것이 제한됩니다. F값이 크다고 해서 모집단에서도 집단별로 평균 차이가 날지 알 수 없기 때문입니다. 그래서 F분포표를 통해 기준 F값을 구해야 합니다. F분포표는 아래 사이트에서 보시면 됩니다.

​     

http://math7.tistory.com/60

​     

F분포는 단측 검정만 가능하므로 유의확률과 자유도만 알면 기준 F통계량을 구할 수 있습니다.

먼저, 우리가 검증하려는 수준인 유의수준 α를 정합니다. F분포표는 α별로 나누어져 있기 때문입니다.

자유도는 2개가 필요한데, 집단 간 자유도와 집단 내 자유도를 구하면 됩니다. 집단 간 자유도가 컬럼(열)이고 집단 내 자유도가 행에 있습니다. 자유도가 정확하게 일치하지 않으면 가까운 값을 선택해 그 행/열을 따라 두 선이 교차하는 지점의 F값이 기준 F통계량입니다.

​     

​ 

#### 참고문헌

​     

C강사님의 강의노트

L교수님의 통계수업

​     

이종익, 박민석 편저, 「사회조사분석사 2급 필기」, 시대고시기획, 2014.

최용석, 「R과 함께하는 통계학의 이해」, BigBook, 2014.

​ 

--2018.10.21

