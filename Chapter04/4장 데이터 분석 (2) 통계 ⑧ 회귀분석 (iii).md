## 4장 데이터 분석 (2) 통계 ⑧ 회귀분석 (iii)

​     

​ 

#### 5) 회귀분석 절차

① 독립변수와 종속변수를 선택한다

② 산점도를 그려 두 변수가 선형적인 관계인지 확인 → 선형 회귀와 비선형 회귀 중 택1

③ 최소제곱법을 이용해 회귀모형(회귀식)을 구한다

④ 회귀모형이 유의한지 분산분석(F값)으로 검정한다

⑤ 각 회귀계수가 유의한지 T-검정으로 검정한다 → 어떤 회귀계수가 가장 중요한가?

​ 
​     

#### 6) 최소제곱법/최소자승법(OLS)

최소제곱법은 회귀식과 실제값 사이의 오차를 제곱해서 가장 최소가 되는 방향으로 회귀식을 만드는 방법입니다. 실제값이 회귀식을 통한 예측값과 정확하게 일치하면 오차는 0이고, 일치하지 않으면 오차가 발생합니다. 데이터의 개수만큼 모든 오차를 더하면 0이 되기 때문에 오차를 제곱한 값으로 회귀식의 예측력을 평가합니다.

오차를 제곱해서 더한 값이 가장 작은 회귀선이 전체 데이터를 잘 설명한다고 봅니다. 반대로 모든 데이터를 지나는 회귀선을 구할 수 없으므로 오차를 작게하는 방향으로 회귀선을 구합니다.

참고로 데이터마이닝이나 머신러닝에서는 모든 데이터를 정확하게 구분하는 분류 방법을 구하더라도 과적합이 되기 때문에 의미가 없다고 봅니다. 과적합에 대해서는 추후에 살펴보도록 하겠습니다.

​ 
​ 

#### 7) 선형 단회귀분석

​ 

지금부터는 각 회귀분석법을 5)의 절차에 맞춰 살펴보겠습니다. 여기서는 5)의 ①~②을 거쳐 선형 단회귀분석 방법이 가장 적합한 방법이라고 가정한 상태에서 분석결과를 살펴보도록 하겠습니다.

​     

먼저 선형 단회귀분석은 독립변수가 1개인 회귀선을 구하는 선형회귀분석입니다. 중학교 때 배운 일차함수로 종속변수를 예측할 수 있습니다.

이를 회귀식이라 부르며  ![1](https://user-images.githubusercontent.com/43332543/47847590-071cbe00-de0f-11e8-816a-7c2107d2ca53.png), 또는  ![2](https://user-images.githubusercontent.com/43332543/47847591-071cbe00-de0f-11e8-82db-919271cb93ce.png) 로도 나타냅니다.

**α/ ![b0](https://user-images.githubusercontent.com/43332543/47847583-0552fa80-de0f-11e8-9bbf-2a2235294816.png)는 상수(y절편), β/ ![b1](https://user-images.githubusercontent.com/43332543/47847584-05eb9100-de0f-11e8-859e-7c0dbf2f3e69.png) 는 직선의 기울기,  ![x](https://user-images.githubusercontent.com/43332543/47847665-4cd98680-de0f-11e8-93db-34510faa0c16.png) 는 독립변수, ε는 오차(잔차),   ![y](https://user-images.githubusercontent.com/43332543/47847587-06842780-de0f-11e8-9414-57c3246371df.png)는 종속변수**입니다. 또한, ![y](https://user-images.githubusercontent.com/43332543/47847587-06842780-de0f-11e8-9414-57c3246371df.png) 를  ![y hat](https://user-images.githubusercontent.com/43332543/47847586-05eb9100-de0f-11e8-8fe9-d93c77c23c1c.png) 라고도 쓰는데 y hat이라고 부르며  ![y](https://user-images.githubusercontent.com/43332543/47847587-06842780-de0f-11e8-9414-57c3246371df.png) 의 예측치를 나타냅니다. 회귀식으로 구한 결과값이 예상한 값이므로 ![y hat](https://user-images.githubusercontent.com/43332543/47847586-05eb9100-de0f-11e8-8fe9-d93c77c23c1c.png) 을 사용합니다.  ![y bar](https://user-images.githubusercontent.com/43332543/47847585-05eb9100-de0f-11e8-9b09-3610e679fbf4.png)는 실제  ![y](https://user-images.githubusercontent.com/43332543/47847587-06842780-de0f-11e8-9414-57c3246371df.png)값들의 평균을 의미합니다.

기울기는 x가 1단위 증가할 때 y가 독립변수의 계수만큼 증가/감소한다는 뜻입니다. 즉, 기울기를 해석하는 것은 독립변수의 영향을 해석하는 행위입니다. 그러나 회귀식의 모든 회귀계수가 유의미하지는 않은데, 이는 p-value를 통해 확인할 수 있습니다.

상수는 x가 0일 때 가지는 y값입니다. 상수가 실질적인 의미를 주는 경우는 적은데, x가 0이 아닌 경우가 많기 때문입니다. 하지만 회귀분석에서는 상수 계수가 주어지며, 유의한 경우도 많아 반드시 상수를 표시해야 합니다.

​     

**① 회귀계수/회귀식(회귀모형)에 대한 가설설정**

​     

가) 회귀계수 검정(T값의 유의확률이 0.05보다 낮으면 대립가설을 채택한다)

**회귀계수 검정 순서 : 독립변수가 유의미한가? → 종속변수가 얼마나 이동하는가?**

​ 

영가설 -   ![img](file:///C:\Users\user\AppData\Local\Temp\DRW00001e845485.gif)   ( 독립변수가 변화해도 종속변수는 변화하지 않는다)

대립가설 -   ![img](file:///C:\Users\user\AppData\Local\Temp\DRW00001e845487.gif)   ( 독립변수가 변화하면 종속변수에 어떤 식으로든 변화를 준다)

대립가설이 맞을 경우, 회귀계수 해석 : 독립변수가 1단위 증가할 때마다 종속변수가 평균적으로 회귀계수만큼 증가/감소한다.

여기서 평균이 들어가는 이유는 통계는 경향성을 보여주며, 회귀식도 데이터들을 종합적으로 고려해 만든 직선이기 때문입니다.

​     

나) 회귀모형 검정(F값의 유의확률이 0.05보다 낮으면 대립가설을 채택한다)

영가설 : 회귀모형이 적합하지 않다(유의하지 않다)

대립가설 : 회귀모형이 적합하다(유의하다)

​     

**② 회귀분석표의 해석(SPSS)**

​     

http://blog.naver.com/PostView.nhn?blogId=sub_om&logNo=220776265441

→ 이 사이트에 가면 spss로 회귀분석한 3개의 표가 나옵니다.(2. 회귀분석 해석)

그러나 회귀분석을 실시하면 4개의 표가 나옵니다. 1번째 표는 어떤 변수를 독립변수와 종속변수로 넣었는지 설명해줍니다. 모형을 만들 때 이를 알고 넣었기 때문에 크게 중요하지 않습니다.

가장 아래쪽의 4번째 표에는 비표준화 계수, 표준화 계수, 유의확률 등을 보여줍니다. **비표준화 계수**의 B는 독립변수를 바꾸지 않고 종속변수에 미치는 영향력을 계수로 나타낸 값입니다. 일반적으로 비표준화 계수의 B를 회귀 계수로 넣습니다. **표준화 계수**의 베타는 독립변수별로 단위를 고려해서 표준화했을 때 어떤 변수가 가장 영향력이 큰지 알려주는 계수입니다. 독립변수의 단위가 작을수록 기울기가 더 크기 때문에 각 회귀계수를 표준오차로 나눠 t분포로 변환한 값입니다.

유의확률은 왼쪽의 관찰 T값과 기준 T값을 비교해 회귀계수가 얼마나 유의한지 나타낸 값입니다. 0.05보다 낮으면 그 회귀계수는 유의하며 독립변수가 1단위 증가할 때마다 얼마나 종속변수가 변화하는지 나타냅니다. 0.05보다 크면 회귀계수가 유의하지 않지만, 회귀식에 계수를 넣고 해석하지 않습니다.

3번째 분산분석표는 분산분석처럼 해석하면 되지만, 여기서는 **유의확률**만 확인하고 넘어가면 됩니다. 회귀식(회귀모형)이 유의하면 유의확률이 0.05보다 작게 나오고, 유의하지 않으면 0.05보다 크게 나옵니다. 

마지막으로 2번째 모형 요약표에서 봐야 할 곳은 **R제곱(R²)**과 수정된 R제곱입니다. 이는 종속변수를 얼마나 설명할 수 있는지 수치로 나타낸 것입니다. 

​     

선형 단회귀분석에서는 표에서 봐야할 부분만 짚었고, 각 개념에 대해서는 구체적으로 설명하지 않았습니다. 자세한 내용은 선형 중회귀분석에서 짚도록 하겠습니다.

​     

**③ 회귀계수의 유의성 검정 및 회귀모형의 유의성 검정**

①에 나왔듯이 내가 실행한 회귀분석이 의미가 있으려면 무조건 p-value가 0.05 이하여야 합니다. 0.05 이상이라면 독립변수나 종속변수를 바꾸거나 이상치/결측치를 해결해야 합니다.

참고로 단회귀분석에서 회귀계수가 유의미하면 회귀모형은 자동적으로 유의미합니다. 독립변수가 종속변수에 영향을 끼친다는 사실이 확인되었고, 이를 함수로 나타냈는데 함수가 의미 없다면 모순되기 때문입니다.

​     

**④ 함수식을 구한 다음, 해석하고 인사이트 찾기**   

 ![2](https://user-images.githubusercontent.com/43332543/47847591-071cbe00-de0f-11e8-82db-919271cb93ce.png) 

이와 같이 적고, 독립변수가 1단위 증가할 때 종속변수는 ![b1](https://user-images.githubusercontent.com/43332543/47847584-05eb9100-de0f-11e8-859e-7c0dbf2f3e69.png)만큼 바뀐다고 해석합니다.

단순히 독립변수와 종속변수만 생각하지 말고 다른 독립변수를 넣으면 어떻게 될지도 고려해야 합니다. 새로운 사업영역이나 주의해야 할 부분을 보고서나 발표 때 말하면 더 좋은 분석이 될 수 있습니다.


​ 

​ 


#### 참고문헌

​     

C강사님의 강의노트

L교수님의 통계수업

​     

서민구, 「R을 이용한 데이터 처리&분석 실무」, 길벗, 2014.

이재길, 「R프로그램에 기반한 다변량분석 및 데이터마이닝」, 황소걸음 아카데미, 2016.

이종익, 박민석 편저, 「사회조사분석사 2급 필기」, 시대고시기획, 2014.

최용석, 「R과 함께하는 통계학의 이해」, BigBook, 2014.

​ 

--2018.10.30